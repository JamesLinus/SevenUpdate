<!-- Copyright (c) Robert Baker, Seven Software -->
<UserControl x:Class="Microsoft.Windows.Controls.BackButton" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" Width="30"
        Height="30" IsEnabled="False">
    <UserControl.Resources>
        <Style TargetType="{x:Type Button}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Button}">
                        <Canvas>
                            <Image Name="Normal" Source="/Windows.Shell;component/Images/BackArrow.png" RenderOptions.BitmapScalingMode="HighQuality" HorizontalAlignment="Left" VerticalAlignment="Top"
                                    Stretch="None" Width="30" Height="30" Opacity="1" />
                            <Image Name="Hover" Source="/Windows.Shell;component/Images/BackArrowHover.png" RenderOptions.BitmapScalingMode="HighQuality" HorizontalAlignment="Left"
                                    VerticalAlignment="Top" Stretch="None" Width="30" Height="30" Opacity="0" />
                            <Image Name="Pressed" Source="/Windows.Shell;component/Images/BackArrowPressed.png" RenderOptions.BitmapScalingMode="HighQuality" HorizontalAlignment="Left"
                                    VerticalAlignment="Top" Stretch="None" Width="30" Height="30" Opacity="0" />
                            <Image Name="Selected" Source="/Windows.Shell;component/Images/BackArrowPressed.png" RenderOptions.BitmapScalingMode="HighQuality" HorizontalAlignment="Left"
                                    VerticalAlignment="Top" Stretch="None" Width="30" Height="30" Opacity="0" />
                            <Image Name="Disabled" Source="/Windows.Shell;component/Images/BackArrowDisabled.png" RenderOptions.BitmapScalingMode="HighQuality" HorizontalAlignment="Left"
                                    VerticalAlignment="Top" Stretch="None" Width="30" Height="30" Opacity="0" />
                        </Canvas>
                        <ControlTemplate.Triggers>
                            <DataTrigger Value="False" Binding="{Binding Path=IsEnabled, RelativeSource={RelativeSource Self}}">
                                <DataTrigger.Setters>
                                    <Setter TargetName="Disabled" Property="Image.Opacity" Value=".7" />
                                    <Setter TargetName="Normal" Property="Image.Opacity" Value=".1" />
                                </DataTrigger.Setters>
                            </DataTrigger>
                            <DataTrigger Value="True" Binding="{Binding Path=IsChecked, RelativeSource={RelativeSource Self}}">
                                <DataTrigger.EnterActions>
                                    <BeginStoryboard>
                                        <Storyboard Storyboard.TargetName="Selected" Storyboard.TargetProperty="Opacity">
                                            <DoubleAnimation AccelerationRatio="0.2" DecelerationRatio="0.3" From="0.3" To="0.7" Duration="0:0:2" AutoReverse="True" RepeatBehavior="Forever" />
                                        </Storyboard>
                                    </BeginStoryboard>
                                </DataTrigger.EnterActions>
                                <DataTrigger.ExitActions>
                                    <BeginStoryboard>
                                        <Storyboard Storyboard.TargetName="Selected" Storyboard.TargetProperty="Opacity">
                                            <DoubleAnimation To="0" Duration="0:0:1" />
                                        </Storyboard>
                                    </BeginStoryboard>
                                </DataTrigger.ExitActions>
                            </DataTrigger>
                            <EventTrigger RoutedEvent="Button.MouseEnter">
                                <EventTrigger.Actions>
                                    <BeginStoryboard>
                                        <Storyboard Storyboard.TargetName="Hover" Storyboard.TargetProperty="Opacity">
                                            <DoubleAnimation To="1" Duration="0:0:0.2" />
                                        </Storyboard>
                                    </BeginStoryboard>
                                </EventTrigger.Actions>
                            </EventTrigger>
                            <EventTrigger RoutedEvent="Button.MouseLeave">
                                <EventTrigger.Actions>
                                    <BeginStoryboard>
                                        <Storyboard Storyboard.TargetName="Hover" Storyboard.TargetProperty="Opacity">
                                            <DoubleAnimation To="0" Duration="0:0:0.2" />
                                        </Storyboard>
                                    </BeginStoryboard>
                                </EventTrigger.Actions>
                            </EventTrigger>
                            <EventTrigger RoutedEvent="Button.PreviewMouseLeftButtonDown">
                                <EventTrigger.Actions>
                                    <BeginStoryboard>
                                        <Storyboard Storyboard.TargetName="Pressed" Storyboard.TargetProperty="Opacity">
                                            <DoubleAnimation To="1" Duration="0:0:0.2" />
                                        </Storyboard>
                                    </BeginStoryboard>
                                </EventTrigger.Actions>
                            </EventTrigger>
                            <EventTrigger RoutedEvent="Button.PreviewMouseLeftButtonUp">
                                <EventTrigger.Actions>
                                    <BeginStoryboard>
                                        <Storyboard Storyboard.TargetName="Pressed" Storyboard.TargetProperty="Opacity">
                                            <DoubleAnimation To="0" Duration="0:0:0.5" />
                                        </Storyboard>
                                    </BeginStoryboard>
                                </EventTrigger.Actions>
                            </EventTrigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Resources>
    <Button IsEnabled="True" Command="NavigationCommands.BrowseBack"></Button>
</UserControl>